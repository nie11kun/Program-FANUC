%
O8303(double Arc) 

G52V0W0 
(send parameter)
#512=#868(dresser big speed)
#514=#870(amount of feed,big) 
#513=#869(dresser small speed)
#515=#871(amount of feed,small) 
#510=#853(dress times)
#537=#850(new wheel flag) 
#527=#859(current wheel dia.) 
IF[#537EQ0]THEN#527=#852(new wheel dia.)
#524=#860(wheel line speed m/s) 
#521=#866 

(dress programm)
#580=#520 
#581=#520 
#582=#517 
#586=#517 
#583=#857 
#587=#857 
#584=1000 
#585=1000 

#540=#570+#580
#541=SQRT[[#540*#540]-[#571*#571]]
#542=#570-#571
#543=[#526/2]+2+#571
#544=#542+[TAN[45]*[#543-#541]] 

#545=#572+#581
#546=SQRT[[#545*#545]-[#573*#573]]
#547=#572-#573
#548=[#526/2]+2+#573
#549=#547+[TAN[45]*[#548-#546]] 

IF[#592LE0]THEN#592=1000

#538=#549 
IF[#544GT#538]THEN#538=#544 
#538=#538+#580*[1-SIN[45]]

IF[#537EQ0]GOTO50(New wheel)
#522=#857 
#523=#527 
GOTO100 
N50 
#522=#521+#538
#523=#527+#538*2
N100
#511=0
#535=0
#532=0
G1G94G90V[#522+1]F#584

N500
#592=#512 
#594=#514 
IF[#511LT[#510-1]]GOTO600 
#592=#513 
#594=#515 
N600
IF[#511GT#510]GOTO5000

#522=#522-#594
#583=#522 

G52W[#573+#582]V#583
G1G90W0F600 
G1G94G90V0F300

N800
G2W[-#546]V[-#547-#581]R[#572+#581]F#592
G1G90W[-#548]V[-#549-#581]
G1G90V0F#585

G52W0V0 

#587=#522 
G52W[-#571+#586]V#587 
G1G90W0F600 
G1G90V0F300 

N1000 
G3W#541V[-#542-#580]R[#570+#580]F#592 
G1G90W#543V[-#544-#580] 
G1G90V0F#585

#523=#523-2*#594

#537=1
#850=#537(wheel flag) 

#857=#522 

IF[#523LT#527]GOTO1100
#532=#532+1 
GOTO500 

N1100 
#527=#523 
#535=#535+#594

#780=#780-#594(Cut X) 

#511=#511+1 
IF[#511LT#510]GOTO500 
G91G64G01V1F#585
G90G64G01W0F#585

N5000 
G52V0W0 

G90G64G01V[#522+1]F[3*#592] 

M99 
%