%
O8302(SAN JIAO) 

G52V0W0 
(send parameter)
#512=#868(dresser big speed)
#514=#870(amount of feed,big) 
#513=#869(dresser small speed)
#515=#871(amount of feed,small) 
#510=#853(dress times)
#537=#850(new wheel flag) 
#527=#859(current wheel dia.) 
IF[#537EQ0]THEN#527=#852(new wheel dia.)
#524=#860(wheel line speed m/s) 
#521=#866 

(dress programm)
#592=#512 
#506=30 
#507=1

#590=[#504+#505]/2
#550=#593/SIN[#590] 
#551=#550*SIN[[#504-#505]/2]
#552=#550*COS[[#504-#505]/2]-[#593+#520]
#531=[#518-#519]/2-#593+#550*COS[[#504-#505]/2] 
#569=[#526-#531*[TAN[#504]+TAN[#505]]]/2
#565=#569+#531*TAN[#504]-#526/2-#551

#555=[#520+#593]*COS[#505]
#556=[#520+#593]*[SIN[#505]-1]
#559=#531*TAN[#505]+#520*COS[#505]+#551 
#595=#552-#531+#520*SIN[#505] 
#567=#526/2-#565+#507-#559+#520*SIN[#506] 
#563=#559+#567
#564=#595-#567*TAN[#506]

#553=-[#520+#593]*COS[#504] 
#554=[#520+#593]*[SIN[#504]-1]
#557=-[#531*TAN[#504]+#520*COS[#504]-#551]
#558=#552-#531+#520*SIN[#504] 
#566=#526/2+#565+#507+#557+#520*SIN[#506] 
#561=#557-#566
#562=#558-#566*TAN[#506]

#534=ABS[#564]+#520*COS[#506]-#507*TAN[#506]-#520 
#533=ABS[#562]+#520*COS[#506]-#507*TAN[#506]-#520 
#538=#534 
IF[#533GT#534]THEN#538=#533 

IF[#592LE0]THEN#592=100 
IF[#537EQ0]GOTO50 
#522=#857 
#523=#527 
GOTO100 

N50 
#522=#521+#538
#523=#527+#538*2

N100
G90G94G64G01V[#522+1]F[3*#592]
W[#565+#517]
V[#522+1] 

#511=0
#535=0
#532=0

N500
#592=#512 
#594=#514 
IF[#511LT[#510-1]]GOTO600 
#592=#513 
#594=#515 

N600
IF[#511GT#510]GOTO5000

#522=#522-#594

G52W[#517+#565]V#522

N800
G90G64G1V0F#592 
W0
G02W#553V#554R[#593+#520]F#592
G01W#557V#558F#592
G01W#561V#562 
G01V0F300 
W0



N1000 
G03W#555V#556R[#593+#520]F#592
G01W#559V#595F#592
G01W#563V#564 
G01V0F300 
W0

#523=#523-2*#594

#537=1
#850=#537(wheel flag) 

#857=#522 

IF[#523LT#527]GOTO1100
#532=#532+1 
GOTO500 

N1100 
#527=#523 
#535=#535+#594

#780=#780-#594(Cut X) 
#880=#880-#594(HUAN XIN CAO INIT X) 
#896=#896-#594(HUAN XIN CAO CURRENT X) 

#511=#511+1 
IF[#511LT#510]GOTO500 

N5000 
G52W0V0 

G90G64G01V[#522+1]F[3*#592] 

M99 
%